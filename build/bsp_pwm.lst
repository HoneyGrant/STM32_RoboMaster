ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"bsp_pwm.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.PWMSelectTclk,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	PWMSelectTclk:
  26              	.LVL0:
  27              	.LFB242:
  28              		.file 1 "bsp/pwm/bsp_pwm.c"
   1:bsp/pwm/bsp_pwm.c **** #include "bsp_pwm.h"
   2:bsp/pwm/bsp_pwm.c **** #include "stdlib.h"
   3:bsp/pwm/bsp_pwm.c **** #include "memory.h"
   4:bsp/pwm/bsp_pwm.c **** 
   5:bsp/pwm/bsp_pwm.c **** // 配合中断以及初始化
   6:bsp/pwm/bsp_pwm.c **** static uint8_t idx;
   7:bsp/pwm/bsp_pwm.c **** static PWMInstance *pwm_instance[PWM_DEVICE_CNT] = {NULL}; // 所有的pwm instance保存于此,用
   8:bsp/pwm/bsp_pwm.c **** static uint32_t PWMSelectTclk(TIM_HandleTypeDef *htim );
   9:bsp/pwm/bsp_pwm.c **** /**
  10:bsp/pwm/bsp_pwm.c ****  * @brief pwm dma传输完成回调函数
  11:bsp/pwm/bsp_pwm.c ****  *
  12:bsp/pwm/bsp_pwm.c ****  * @param htim 发生中断的定时器句柄
  13:bsp/pwm/bsp_pwm.c ****  */
  14:bsp/pwm/bsp_pwm.c **** void HAL_TIM_PWM_PulseFinishedCallback(TIM_HandleTypeDef *htim)
  15:bsp/pwm/bsp_pwm.c **** {
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
  17:bsp/pwm/bsp_pwm.c ****     { // 来自同一个定时器的中断且通道相同
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
  19:bsp/pwm/bsp_pwm.c ****         {
  20:bsp/pwm/bsp_pwm.c ****             if (pwm_instance[i]->callback) // 如果有回调函数
  21:bsp/pwm/bsp_pwm.c ****                 pwm_instance[i]->callback(pwm_instance[i]);
  22:bsp/pwm/bsp_pwm.c ****             return; // 一次只能有一个通道的中断,所以直接返回
  23:bsp/pwm/bsp_pwm.c ****         }
  24:bsp/pwm/bsp_pwm.c ****     }
  25:bsp/pwm/bsp_pwm.c **** }
  26:bsp/pwm/bsp_pwm.c **** 
  27:bsp/pwm/bsp_pwm.c **** PWMInstance *PWMRegister(PWM_Init_Config_s *config)
  28:bsp/pwm/bsp_pwm.c **** {
  29:bsp/pwm/bsp_pwm.c ****     if (idx >= PWM_DEVICE_CNT) // 超过最大实例数,考虑增加或查看是否有内存泄漏
  30:bsp/pwm/bsp_pwm.c ****         while (1)
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 2


  31:bsp/pwm/bsp_pwm.c ****             ;
  32:bsp/pwm/bsp_pwm.c ****     PWMInstance *pwm = (PWMInstance *)malloc(sizeof(PWMInstance));
  33:bsp/pwm/bsp_pwm.c ****     memset(pwm, 0, sizeof(PWMInstance));
  34:bsp/pwm/bsp_pwm.c **** 
  35:bsp/pwm/bsp_pwm.c ****     pwm->htim = config->htim;
  36:bsp/pwm/bsp_pwm.c ****     pwm->channel = config->channel;
  37:bsp/pwm/bsp_pwm.c ****     pwm->period = config->period;
  38:bsp/pwm/bsp_pwm.c ****     pwm->dutyratio = config->dutyratio;
  39:bsp/pwm/bsp_pwm.c ****     pwm->callback = config->callback;
  40:bsp/pwm/bsp_pwm.c ****     pwm->id = config->id;
  41:bsp/pwm/bsp_pwm.c ****     pwm->tclk = PWMSelectTclk(pwm->htim);
  42:bsp/pwm/bsp_pwm.c ****     // 启动PWM
  43:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
  44:bsp/pwm/bsp_pwm.c ****     PWMSetPeriod(pwm, pwm->period);
  45:bsp/pwm/bsp_pwm.c ****     PWMSetDutyRatio(pwm, pwm->dutyratio);
  46:bsp/pwm/bsp_pwm.c ****     pwm_instance[idx++] = pwm;
  47:bsp/pwm/bsp_pwm.c ****     return pwm;
  48:bsp/pwm/bsp_pwm.c **** }
  49:bsp/pwm/bsp_pwm.c **** 
  50:bsp/pwm/bsp_pwm.c **** /* 只是对HAL的函数进行了形式上的封装 */
  51:bsp/pwm/bsp_pwm.c **** void PWMStart(PWMInstance *pwm)
  52:bsp/pwm/bsp_pwm.c **** {
  53:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
  54:bsp/pwm/bsp_pwm.c **** }
  55:bsp/pwm/bsp_pwm.c **** 
  56:bsp/pwm/bsp_pwm.c **** /* 只是对HAL的函数进行了形式上的封装 */
  57:bsp/pwm/bsp_pwm.c **** void PWMStop(PWMInstance *pwm)
  58:bsp/pwm/bsp_pwm.c **** {
  59:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Stop(pwm->htim, pwm->channel);
  60:bsp/pwm/bsp_pwm.c **** }
  61:bsp/pwm/bsp_pwm.c **** 
  62:bsp/pwm/bsp_pwm.c **** /*
  63:bsp/pwm/bsp_pwm.c ****  * @brief 设置pwm周期
  64:bsp/pwm/bsp_pwm.c ****  *
  65:bsp/pwm/bsp_pwm.c ****  * @param pwm pwm实例
  66:bsp/pwm/bsp_pwm.c ****  * @param period 周期 单位 s
  67:bsp/pwm/bsp_pwm.c ****  */
  68:bsp/pwm/bsp_pwm.c **** void PWMSetPeriod(PWMInstance *pwm, float period)
  69:bsp/pwm/bsp_pwm.c **** {
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
  71:bsp/pwm/bsp_pwm.c **** }
  72:bsp/pwm/bsp_pwm.c **** /*
  73:bsp/pwm/bsp_pwm.c ****     * @brief 设置pwm占空比
  74:bsp/pwm/bsp_pwm.c ****     *
  75:bsp/pwm/bsp_pwm.c ****     * @param pwm pwm实例
  76:bsp/pwm/bsp_pwm.c ****     * @param dutyratio 占空比 0~1
  77:bsp/pwm/bsp_pwm.c **** */
  78:bsp/pwm/bsp_pwm.c **** void PWMSetDutyRatio(PWMInstance *pwm, float dutyratio)
  79:bsp/pwm/bsp_pwm.c **** {
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
  81:bsp/pwm/bsp_pwm.c **** }
  82:bsp/pwm/bsp_pwm.c **** 
  83:bsp/pwm/bsp_pwm.c **** /* 只是对HAL的函数进行了形式上的封装 */
  84:bsp/pwm/bsp_pwm.c **** void PWMStartDMA(PWMInstance *pwm, uint32_t *pData, uint32_t Size)
  85:bsp/pwm/bsp_pwm.c **** {
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
  87:bsp/pwm/bsp_pwm.c **** }
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 3


  88:bsp/pwm/bsp_pwm.c **** 
  89:bsp/pwm/bsp_pwm.c **** // 设置pwm对应定时器时钟源频率
  90:bsp/pwm/bsp_pwm.c **** //tim2~7,12~14:APB1  tim1,8~11:APB2
  91:bsp/pwm/bsp_pwm.c **** static uint32_t PWMSelectTclk(TIM_HandleTypeDef *htim )
  92:bsp/pwm/bsp_pwm.c **** {
  29              		.loc 1 92 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 92 1 is_stmt 0 view .LVU1
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
  93:bsp/pwm/bsp_pwm.c ****     uintptr_t tclk_temp  = ((uintptr_t)((htim)->Instance));
  39              		.loc 1 93 5 is_stmt 1 view .LVU2
  40              		.loc 1 93 47 is_stmt 0 view .LVU3
  41 0002 0368     		ldr	r3, [r0]
  42              	.LVL1:
  94:bsp/pwm/bsp_pwm.c ****     if (
  43              		.loc 1 94 5 is_stmt 1 view .LVU4
  95:bsp/pwm/bsp_pwm.c ****             (tclk_temp <= (APB1PERIPH_BASE + 0x2000UL)) &&
  44              		.loc 1 95 57 is_stmt 0 view .LVU5
  45 0004 03F14042 		add	r2, r3, #-1073741824
  94:bsp/pwm/bsp_pwm.c ****     if (
  46              		.loc 1 94 8 view .LVU6
  47 0008 B2F5005F 		cmp	r2, #8192
  48 000c 0FD9     		bls	.L11
  96:bsp/pwm/bsp_pwm.c ****             (tclk_temp >= (APB1PERIPH_BASE + 0x0000UL)))
  97:bsp/pwm/bsp_pwm.c ****     {
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  99:bsp/pwm/bsp_pwm.c ****     }
 100:bsp/pwm/bsp_pwm.c ****     else if (
  49              		.loc 1 100 10 is_stmt 1 view .LVU7
 101:bsp/pwm/bsp_pwm.c ****             ((tclk_temp <= (APB2PERIPH_BASE + 0x0400UL)) &&
  50              		.loc 1 101 58 is_stmt 0 view .LVU8
  51 000e 03F13F42 		add	r2, r3, #-1090519040
  52 0012 02F57F02 		add	r2, r2, #16711680
 100:bsp/pwm/bsp_pwm.c ****             ((tclk_temp <= (APB2PERIPH_BASE + 0x0400UL)) &&
  53              		.loc 1 100 13 view .LVU9
  54 0016 B2F5806F 		cmp	r2, #1024
  55 001a 17D9     		bls	.L5
 102:bsp/pwm/bsp_pwm.c ****              (tclk_temp >= (APB2PERIPH_BASE + 0x0000UL))) ||
 103:bsp/pwm/bsp_pwm.c ****             ((tclk_temp <= (APB2PERIPH_BASE + 0x4800UL)) &&
  56              		.loc 1 103 58 view .LVU10
  57 001c A3F14023 		sub	r3, r3, #1073758208
  58              	.LVL2:
  59              		.loc 1 103 58 view .LVU11
  60 0020 A3F58033 		sub	r3, r3, #65536
 102:bsp/pwm/bsp_pwm.c ****              (tclk_temp >= (APB2PERIPH_BASE + 0x0000UL))) ||
  61              		.loc 1 102 59 view .LVU12
  62 0024 B3F5006F 		cmp	r3, #2048
  63 0028 10D9     		bls	.L5
 104:bsp/pwm/bsp_pwm.c ****              (tclk_temp >= (APB2PERIPH_BASE + 0x4000UL))))
 105:bsp/pwm/bsp_pwm.c ****     {
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 4


 107:bsp/pwm/bsp_pwm.c ****     }
 108:bsp/pwm/bsp_pwm.c ****     return 0;
  64              		.loc 1 108 12 view .LVU13
  65 002a 0020     		movs	r0, #0
  66              	.LVL3:
  67              	.L1:
 109:bsp/pwm/bsp_pwm.c **** }...
  68              		.loc 1 109 1 view .LVU14
  69 002c 08BD     		pop	{r3, pc}
  70              	.LVL4:
  71              	.L11:
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  72              		.loc 1 98 9 is_stmt 1 view .LVU15
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  73              		.loc 1 98 17 is_stmt 0 view .LVU16
  74 002e FFF7FEFF 		bl	HAL_RCC_GetPCLK1Freq
  75              	.LVL5:
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  76              		.loc 1 98 61 view .LVU17
  77 0032 0E4B     		ldr	r3, .L12
  78 0034 9B68     		ldr	r3, [r3, #8]
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  79              		.loc 1 98 85 view .LVU18
  80 0036 C3F38223 		ubfx	r3, r3, #10, #3
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  81              		.loc 1 98 56 view .LVU19
  82 003a 0D4A     		ldr	r2, .L12+4
  83 003c D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  84              		.loc 1 98 117 view .LVU20
  85 003e 1BB9     		cbnz	r3, .L7
  86 0040 0123     		movs	r3, #1
  87              	.L3:
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  88              		.loc 1 98 40 discriminator 4 view .LVU21
  89 0042 03FB00F0 		mul	r0, r3, r0
  90 0046 F1E7     		b	.L1
  91              	.L7:
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  92              		.loc 1 98 117 view .LVU22
  93 0048 0223     		movs	r3, #2
  94 004a FAE7     		b	.L3
  95              	.LVL6:
  96              	.L5:
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  97              		.loc 1 106 9 is_stmt 1 view .LVU23
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  98              		.loc 1 106 17 is_stmt 0 view .LVU24
  99 004c FFF7FEFF 		bl	HAL_RCC_GetPCLK2Freq
 100              	.LVL7:
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 101              		.loc 1 106 61 view .LVU25
 102 0050 064B     		ldr	r3, .L12
 103 0052 9B68     		ldr	r3, [r3, #8]
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 104              		.loc 1 106 85 view .LVU26
 105 0054 C3F38223 		ubfx	r3, r3, #10, #3
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 5


 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 106              		.loc 1 106 56 view .LVU27
 107 0058 054A     		ldr	r2, .L12+4
 108 005a D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 109              		.loc 1 106 117 view .LVU28
 110 005c 1BB9     		cbnz	r3, .L9
 111 005e 0123     		movs	r3, #1
 112              	.L6:
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 113              		.loc 1 106 40 discriminator 4 view .LVU29
 114 0060 03FB00F0 		mul	r0, r3, r0
 115 0064 E2E7     		b	.L1
 116              	.L9:
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 117              		.loc 1 106 117 view .LVU30
 118 0066 0223     		movs	r3, #2
 119 0068 FAE7     		b	.L6
 120              	.L13:
 121 006a 00BF     		.align	2
 122              	.L12:
 123 006c 00380240 		.word	1073887232
 124 0070 00000000 		.word	APBPrescTable
 125              		.cfi_endproc
 126              	.LFE242:
 128              		.section	.text.HAL_TIM_PWM_PulseFinishedCallback,"ax",%progbits
 129              		.align	1
 130              		.global	HAL_TIM_PWM_PulseFinishedCallback
 131              		.syntax unified
 132              		.thumb
 133              		.thumb_func
 135              	HAL_TIM_PWM_PulseFinishedCallback:
 136              	.LVL8:
 137              	.LFB235:
  15:bsp/pwm/bsp_pwm.c **** {
 138              		.loc 1 15 1 is_stmt 1 view -0
 139              		.cfi_startproc
 140              		@ args = 0, pretend = 0, frame = 0
 141              		@ frame_needed = 0, uses_anonymous_args = 0
  15:bsp/pwm/bsp_pwm.c **** {
 142              		.loc 1 15 1 is_stmt 0 view .LVU32
 143 0000 08B5     		push	{r3, lr}
 144              	.LCFI1:
 145              		.cfi_def_cfa_offset 8
 146              		.cfi_offset 3, -8
 147              		.cfi_offset 14, -4
 148 0002 0146     		mov	r1, r0
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 149              		.loc 1 16 5 is_stmt 1 view .LVU33
 150              	.LBB2:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 151              		.loc 1 16 10 view .LVU34
 152              	.LVL9:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 153              		.loc 1 16 18 is_stmt 0 view .LVU35
 154 0004 0023     		movs	r3, #0
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 6


 155              		.loc 1 16 5 view .LVU36
 156 0006 01E0     		b	.L15
 157              	.LVL10:
 158              	.L16:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 159              		.loc 1 16 34 is_stmt 1 discriminator 2 view .LVU37
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 160              		.loc 1 16 35 is_stmt 0 discriminator 2 view .LVU38
 161 0008 0133     		adds	r3, r3, #1
 162              	.LVL11:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 163              		.loc 1 16 35 discriminator 2 view .LVU39
 164 000a DBB2     		uxtb	r3, r3
 165              	.LVL12:
 166              	.L15:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 167              		.loc 1 16 25 is_stmt 1 discriminator 1 view .LVU40
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 168              		.loc 1 16 27 is_stmt 0 discriminator 1 view .LVU41
 169 000c 0B4A     		ldr	r2, .L21
 170 000e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 171              		.loc 1 16 5 discriminator 1 view .LVU42
 172 0010 9A42     		cmp	r2, r3
 173 0012 12D9     		bls	.L14
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 174              		.loc 1 18 9 is_stmt 1 view .LVU43
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 175              		.loc 1 18 25 is_stmt 0 view .LVU44
 176 0014 0A4A     		ldr	r2, .L21+4
 177 0016 52F82300 		ldr	r0, [r2, r3, lsl #2]
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 178              		.loc 1 18 28 view .LVU45
 179 001a 0268     		ldr	r2, [r0]
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 180              		.loc 1 18 12 view .LVU46
 181 001c 8A42     		cmp	r2, r1
 182 001e F3D1     		bne	.L16
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 183              		.loc 1 18 50 discriminator 1 view .LVU47
 184 0020 91F81CE0 		ldrb	lr, [r1, #28]	@ zero_extendqisi2
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 185              		.loc 1 18 83 discriminator 1 view .LVU48
 186 0024 4268     		ldr	r2, [r0, #4]
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 187              		.loc 1 18 92 discriminator 1 view .LVU49
 188 0026 4FEA920C 		lsr	ip, r2, #2
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 189              		.loc 1 18 65 discriminator 1 view .LVU50
 190 002a 0122     		movs	r2, #1
 191 002c 02FA0CF2 		lsl	r2, r2, ip
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 192              		.loc 1 18 43 discriminator 1 view .LVU51
 193 0030 9645     		cmp	lr, r2
 194 0032 E9D1     		bne	.L16
  20:bsp/pwm/bsp_pwm.c ****             if (pwm_instance[i]->callback) // 如果有回调函数
 195              		.loc 1 20 13 is_stmt 1 view .LVU52
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 7


  20:bsp/pwm/bsp_pwm.c ****             if (pwm_instance[i]->callback) // 如果有回调函数
 196              		.loc 1 20 32 is_stmt 0 view .LVU53
 197 0034 4369     		ldr	r3, [r0, #20]
 198              	.LVL13:
  20:bsp/pwm/bsp_pwm.c ****             if (pwm_instance[i]->callback) // 如果有回调函数
 199              		.loc 1 20 16 view .LVU54
 200 0036 03B1     		cbz	r3, .L14
  21:bsp/pwm/bsp_pwm.c ****                 pwm_instance[i]->callback(pwm_instance[i]);
 201              		.loc 1 21 17 is_stmt 1 view .LVU55
 202 0038 9847     		blx	r3
 203              	.LVL14:
  22:bsp/pwm/bsp_pwm.c ****             return; // 一次只能有一个通道的中断,所以直接返回
 204              		.loc 1 22 13 view .LVU56
 205              	.L14:
  22:bsp/pwm/bsp_pwm.c ****             return; // 一次只能有一个通道的中断,所以直接返回
 206              		.loc 1 22 13 is_stmt 0 view .LVU57
 207              	.LBE2:
  25:bsp/pwm/bsp_pwm.c **** }
 208              		.loc 1 25 1 view .LVU58
 209 003a 08BD     		pop	{r3, pc}
 210              	.L22:
 211              		.align	2
 212              	.L21:
 213 003c 00000000 		.word	.LANCHOR1
 214 0040 00000000 		.word	.LANCHOR0
 215              		.cfi_endproc
 216              	.LFE235:
 218              		.section	.text.PWMStart,"ax",%progbits
 219              		.align	1
 220              		.global	PWMStart
 221              		.syntax unified
 222              		.thumb
 223              		.thumb_func
 225              	PWMStart:
 226              	.LVL15:
 227              	.LFB237:
  52:bsp/pwm/bsp_pwm.c **** {
 228              		.loc 1 52 1 is_stmt 1 view -0
 229              		.cfi_startproc
 230              		@ args = 0, pretend = 0, frame = 0
 231              		@ frame_needed = 0, uses_anonymous_args = 0
  52:bsp/pwm/bsp_pwm.c **** {
 232              		.loc 1 52 1 is_stmt 0 view .LVU60
 233 0000 08B5     		push	{r3, lr}
 234              	.LCFI2:
 235              		.cfi_def_cfa_offset 8
 236              		.cfi_offset 3, -8
 237              		.cfi_offset 14, -4
  53:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
 238              		.loc 1 53 5 is_stmt 1 view .LVU61
 239 0002 4168     		ldr	r1, [r0, #4]
 240 0004 0068     		ldr	r0, [r0]
 241              	.LVL16:
  53:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
 242              		.loc 1 53 5 is_stmt 0 view .LVU62
 243 0006 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 244              	.LVL17:
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 8


  54:bsp/pwm/bsp_pwm.c **** }
 245              		.loc 1 54 1 view .LVU63
 246 000a 08BD     		pop	{r3, pc}
 247              		.cfi_endproc
 248              	.LFE237:
 250              		.section	.text.PWMStop,"ax",%progbits
 251              		.align	1
 252              		.global	PWMStop
 253              		.syntax unified
 254              		.thumb
 255              		.thumb_func
 257              	PWMStop:
 258              	.LVL18:
 259              	.LFB238:
  58:bsp/pwm/bsp_pwm.c **** {
 260              		.loc 1 58 1 is_stmt 1 view -0
 261              		.cfi_startproc
 262              		@ args = 0, pretend = 0, frame = 0
 263              		@ frame_needed = 0, uses_anonymous_args = 0
  58:bsp/pwm/bsp_pwm.c **** {
 264              		.loc 1 58 1 is_stmt 0 view .LVU65
 265 0000 08B5     		push	{r3, lr}
 266              	.LCFI3:
 267              		.cfi_def_cfa_offset 8
 268              		.cfi_offset 3, -8
 269              		.cfi_offset 14, -4
  59:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Stop(pwm->htim, pwm->channel);
 270              		.loc 1 59 5 is_stmt 1 view .LVU66
 271 0002 4168     		ldr	r1, [r0, #4]
 272 0004 0068     		ldr	r0, [r0]
 273              	.LVL19:
  59:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Stop(pwm->htim, pwm->channel);
 274              		.loc 1 59 5 is_stmt 0 view .LVU67
 275 0006 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 276              	.LVL20:
  60:bsp/pwm/bsp_pwm.c **** }
 277              		.loc 1 60 1 view .LVU68
 278 000a 08BD     		pop	{r3, pc}
 279              		.cfi_endproc
 280              	.LFE238:
 282              		.section	.text.PWMSetPeriod,"ax",%progbits
 283              		.align	1
 284              		.global	PWMSetPeriod
 285              		.syntax unified
 286              		.thumb
 287              		.thumb_func
 289              	PWMSetPeriod:
 290              	.LVL21:
 291              	.LFB239:
  69:bsp/pwm/bsp_pwm.c **** {
 292              		.loc 1 69 1 is_stmt 1 view -0
 293              		.cfi_startproc
 294              		@ args = 0, pretend = 0, frame = 0
 295              		@ frame_needed = 0, uses_anonymous_args = 0
 296              		@ link register save eliminated.
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 297              		.loc 1 70 5 view .LVU70
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 9


  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 298              		.loc 1 70 5 view .LVU71
 299 0000 8368     		ldr	r3, [r0, #8]
 300 0002 0168     		ldr	r1, [r0]
 301 0004 4A68     		ldr	r2, [r1, #4]
 302 0006 0132     		adds	r2, r2, #1
 303 0008 B3FBF2F3 		udiv	r3, r3, r2
 304 000c 07EE903A 		vmov	s15, r3	@ int
 305 0010 F8EE677A 		vcvt.f32.u32	s15, s15
 306 0014 67EE807A 		vmul.f32	s15, s15, s0
 307 0018 0B68     		ldr	r3, [r1]
 308 001a FCEEE77A 		vcvt.u32.f32	s15, s15
 309 001e C3ED0B7A 		vstr.32	s15, [r3, #44]	@ int
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 310              		.loc 1 70 5 view .LVU72
 311 0022 8368     		ldr	r3, [r0, #8]
 312 0024 0168     		ldr	r1, [r0]
 313 0026 4A68     		ldr	r2, [r1, #4]
 314 0028 0132     		adds	r2, r2, #1
 315 002a B3FBF2F3 		udiv	r3, r3, r2
 316 002e 07EE903A 		vmov	s15, r3	@ int
 317 0032 F8EE677A 		vcvt.f32.u32	s15, s15
 318 0036 27EE800A 		vmul.f32	s0, s15, s0
 319              	.LVL22:
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 320              		.loc 1 70 5 is_stmt 0 view .LVU73
 321 003a BCEEC00A 		vcvt.u32.f32	s0, s0
 322 003e 81ED030A 		vstr.32	s0, [r1, #12]	@ int
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 323              		.loc 1 70 5 is_stmt 1 view .LVU74
  71:bsp/pwm/bsp_pwm.c **** }
 324              		.loc 1 71 1 is_stmt 0 view .LVU75
 325 0042 7047     		bx	lr
 326              		.cfi_endproc
 327              	.LFE239:
 329              		.section	.text.PWMSetDutyRatio,"ax",%progbits
 330              		.align	1
 331              		.global	PWMSetDutyRatio
 332              		.syntax unified
 333              		.thumb
 334              		.thumb_func
 336              	PWMSetDutyRatio:
 337              	.LVL23:
 338              	.LFB240:
  79:bsp/pwm/bsp_pwm.c **** {
 339              		.loc 1 79 1 is_stmt 1 view -0
 340              		.cfi_startproc
 341              		@ args = 0, pretend = 0, frame = 0
 342              		@ frame_needed = 0, uses_anonymous_args = 0
 343              		@ link register save eliminated.
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 344              		.loc 1 80 5 view .LVU77
 345 0000 4368     		ldr	r3, [r0, #4]
 346 0002 63B9     		cbnz	r3, .L29
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 347              		.loc 1 80 5 is_stmt 0 discriminator 1 view .LVU78
 348 0004 0368     		ldr	r3, [r0]
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 10


 349 0006 1B68     		ldr	r3, [r3]
 350 0008 D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
 351 000c F8EE677A 		vcvt.f32.u32	s15, s15
 352 0010 27EE800A 		vmul.f32	s0, s15, s0
 353              	.LVL24:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 354              		.loc 1 80 5 discriminator 1 view .LVU79
 355 0014 BCEEC00A 		vcvt.u32.f32	s0, s0
 356 0018 83ED0D0A 		vstr.32	s0, [r3, #52]	@ int
 357 001c 7047     		bx	lr
 358              	.LVL25:
 359              	.L29:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 360              		.loc 1 80 5 discriminator 2 view .LVU80
 361 001e 042B     		cmp	r3, #4
 362 0020 0ED0     		beq	.L33
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 363              		.loc 1 80 5 discriminator 4 view .LVU81
 364 0022 082B     		cmp	r3, #8
 365 0024 19D0     		beq	.L34
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 366              		.loc 1 80 5 discriminator 7 view .LVU82
 367 0026 0368     		ldr	r3, [r0]
 368 0028 1B68     		ldr	r3, [r3]
 369 002a D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
 370 002e F8EE677A 		vcvt.f32.u32	s15, s15
 371 0032 27EE800A 		vmul.f32	s0, s15, s0
 372              	.LVL26:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 373              		.loc 1 80 5 discriminator 7 view .LVU83
 374 0036 BCEEC00A 		vcvt.u32.f32	s0, s0
 375 003a 83ED100A 		vstr.32	s0, [r3, #64]	@ int
  81:bsp/pwm/bsp_pwm.c **** }
 376              		.loc 1 81 1 discriminator 7 view .LVU84
 377 003e 7047     		bx	lr
 378              	.LVL27:
 379              	.L33:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 380              		.loc 1 80 5 discriminator 3 view .LVU85
 381 0040 0368     		ldr	r3, [r0]
 382 0042 1B68     		ldr	r3, [r3]
 383 0044 D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
 384 0048 F8EE677A 		vcvt.f32.u32	s15, s15
 385 004c 27EE800A 		vmul.f32	s0, s15, s0
 386              	.LVL28:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 387              		.loc 1 80 5 discriminator 3 view .LVU86
 388 0050 BCEEC00A 		vcvt.u32.f32	s0, s0
 389 0054 83ED0E0A 		vstr.32	s0, [r3, #56]	@ int
 390 0058 7047     		bx	lr
 391              	.LVL29:
 392              	.L34:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 393              		.loc 1 80 5 discriminator 6 view .LVU87
 394 005a 0368     		ldr	r3, [r0]
 395 005c 1B68     		ldr	r3, [r3]
 396 005e D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 11


 397 0062 F8EE677A 		vcvt.f32.u32	s15, s15
 398 0066 27EE800A 		vmul.f32	s0, s15, s0
 399              	.LVL30:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 400              		.loc 1 80 5 discriminator 6 view .LVU88
 401 006a BCEEC00A 		vcvt.u32.f32	s0, s0
 402 006e 83ED0F0A 		vstr.32	s0, [r3, #60]	@ int
 403 0072 7047     		bx	lr
 404              		.cfi_endproc
 405              	.LFE240:
 407              		.section	.text.PWMRegister,"ax",%progbits
 408              		.align	1
 409              		.global	PWMRegister
 410              		.syntax unified
 411              		.thumb
 412              		.thumb_func
 414              	PWMRegister:
 415              	.LVL31:
 416              	.LFB236:
  28:bsp/pwm/bsp_pwm.c **** {
 417              		.loc 1 28 1 is_stmt 1 view -0
 418              		.cfi_startproc
 419              		@ args = 0, pretend = 0, frame = 0
 420              		@ frame_needed = 0, uses_anonymous_args = 0
  28:bsp/pwm/bsp_pwm.c **** {
 421              		.loc 1 28 1 is_stmt 0 view .LVU90
 422 0000 38B5     		push	{r3, r4, r5, lr}
 423              	.LCFI4:
 424              		.cfi_def_cfa_offset 16
 425              		.cfi_offset 3, -16
 426              		.cfi_offset 4, -12
 427              		.cfi_offset 5, -8
 428              		.cfi_offset 14, -4
  29:bsp/pwm/bsp_pwm.c ****     if (idx >= PWM_DEVICE_CNT) // 超过最大实例数,考虑增加或查看是否有内存泄漏
 429              		.loc 1 29 5 is_stmt 1 view .LVU91
  29:bsp/pwm/bsp_pwm.c ****     if (idx >= PWM_DEVICE_CNT) // 超过最大实例数,考虑增加或查看是否有内存泄漏
 430              		.loc 1 29 13 is_stmt 0 view .LVU92
 431 0002 1C4B     		ldr	r3, .L39
 432 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  29:bsp/pwm/bsp_pwm.c ****     if (idx >= PWM_DEVICE_CNT) // 超过最大实例数,考虑增加或查看是否有内存泄漏
 433              		.loc 1 29 8 view .LVU93
 434 0006 0F2B     		cmp	r3, #15
 435 0008 00D9     		bls	.L36
 436              	.L37:
  30:bsp/pwm/bsp_pwm.c ****         while (1)
 437              		.loc 1 30 9 is_stmt 1 discriminator 1 view .LVU94
  31:bsp/pwm/bsp_pwm.c ****             ;
 438              		.loc 1 31 13 discriminator 1 view .LVU95
  30:bsp/pwm/bsp_pwm.c ****         while (1)
 439              		.loc 1 30 15 discriminator 1 view .LVU96
 440 000a FEE7     		b	.L37
 441              	.L36:
 442 000c 0546     		mov	r5, r0
  32:bsp/pwm/bsp_pwm.c ****     PWMInstance *pwm = (PWMInstance *)malloc(sizeof(PWMInstance));
 443              		.loc 1 32 5 view .LVU97
  32:bsp/pwm/bsp_pwm.c ****     PWMInstance *pwm = (PWMInstance *)malloc(sizeof(PWMInstance));
 444              		.loc 1 32 39 is_stmt 0 view .LVU98
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 12


 445 000e 1C20     		movs	r0, #28
 446              	.LVL32:
  32:bsp/pwm/bsp_pwm.c ****     PWMInstance *pwm = (PWMInstance *)malloc(sizeof(PWMInstance));
 447              		.loc 1 32 39 view .LVU99
 448 0010 FFF7FEFF 		bl	malloc
 449              	.LVL33:
 450 0014 0446     		mov	r4, r0
 451              	.LVL34:
  33:bsp/pwm/bsp_pwm.c ****     memset(pwm, 0, sizeof(PWMInstance));
 452              		.loc 1 33 5 is_stmt 1 view .LVU100
 453 0016 0023     		movs	r3, #0
 454 0018 0360     		str	r3, [r0]	@ unaligned
 455 001a 4360     		str	r3, [r0, #4]	@ unaligned
 456 001c 8360     		str	r3, [r0, #8]	@ unaligned
 457 001e C360     		str	r3, [r0, #12]	@ unaligned
 458 0020 0361     		str	r3, [r0, #16]	@ unaligned
 459 0022 4361     		str	r3, [r0, #20]	@ unaligned
 460 0024 8361     		str	r3, [r0, #24]	@ unaligned
  35:bsp/pwm/bsp_pwm.c ****     pwm->htim = config->htim;
 461              		.loc 1 35 5 view .LVU101
  35:bsp/pwm/bsp_pwm.c ****     pwm->htim = config->htim;
 462              		.loc 1 35 23 is_stmt 0 view .LVU102
 463 0026 2868     		ldr	r0, [r5]
 464              	.LVL35:
  35:bsp/pwm/bsp_pwm.c ****     pwm->htim = config->htim;
 465              		.loc 1 35 15 view .LVU103
 466 0028 2060     		str	r0, [r4]
  36:bsp/pwm/bsp_pwm.c ****     pwm->channel = config->channel;
 467              		.loc 1 36 5 is_stmt 1 view .LVU104
  36:bsp/pwm/bsp_pwm.c ****     pwm->channel = config->channel;
 468              		.loc 1 36 26 is_stmt 0 view .LVU105
 469 002a 6B68     		ldr	r3, [r5, #4]
  36:bsp/pwm/bsp_pwm.c ****     pwm->channel = config->channel;
 470              		.loc 1 36 18 view .LVU106
 471 002c 6360     		str	r3, [r4, #4]
  37:bsp/pwm/bsp_pwm.c ****     pwm->period = config->period;
 472              		.loc 1 37 5 is_stmt 1 view .LVU107
  37:bsp/pwm/bsp_pwm.c ****     pwm->period = config->period;
 473              		.loc 1 37 25 is_stmt 0 view .LVU108
 474 002e AB68     		ldr	r3, [r5, #8]	@ float
  37:bsp/pwm/bsp_pwm.c ****     pwm->period = config->period;
 475              		.loc 1 37 17 view .LVU109
 476 0030 E360     		str	r3, [r4, #12]	@ float
  38:bsp/pwm/bsp_pwm.c ****     pwm->dutyratio = config->dutyratio;
 477              		.loc 1 38 5 is_stmt 1 view .LVU110
  38:bsp/pwm/bsp_pwm.c ****     pwm->dutyratio = config->dutyratio;
 478              		.loc 1 38 28 is_stmt 0 view .LVU111
 479 0032 EB68     		ldr	r3, [r5, #12]	@ float
  38:bsp/pwm/bsp_pwm.c ****     pwm->dutyratio = config->dutyratio;
 480              		.loc 1 38 20 view .LVU112
 481 0034 2361     		str	r3, [r4, #16]	@ float
  39:bsp/pwm/bsp_pwm.c ****     pwm->callback = config->callback;
 482              		.loc 1 39 5 is_stmt 1 view .LVU113
  39:bsp/pwm/bsp_pwm.c ****     pwm->callback = config->callback;
 483              		.loc 1 39 27 is_stmt 0 view .LVU114
 484 0036 2B69     		ldr	r3, [r5, #16]
  39:bsp/pwm/bsp_pwm.c ****     pwm->callback = config->callback;
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 13


 485              		.loc 1 39 19 view .LVU115
 486 0038 6361     		str	r3, [r4, #20]
  40:bsp/pwm/bsp_pwm.c ****     pwm->id = config->id;
 487              		.loc 1 40 5 is_stmt 1 view .LVU116
  40:bsp/pwm/bsp_pwm.c ****     pwm->id = config->id;
 488              		.loc 1 40 21 is_stmt 0 view .LVU117
 489 003a 6B69     		ldr	r3, [r5, #20]
  40:bsp/pwm/bsp_pwm.c ****     pwm->id = config->id;
 490              		.loc 1 40 13 view .LVU118
 491 003c A361     		str	r3, [r4, #24]
  41:bsp/pwm/bsp_pwm.c ****     pwm->tclk = PWMSelectTclk(pwm->htim);
 492              		.loc 1 41 5 is_stmt 1 view .LVU119
  41:bsp/pwm/bsp_pwm.c ****     pwm->tclk = PWMSelectTclk(pwm->htim);
 493              		.loc 1 41 17 is_stmt 0 view .LVU120
 494 003e FFF7FEFF 		bl	PWMSelectTclk
 495              	.LVL36:
  41:bsp/pwm/bsp_pwm.c ****     pwm->tclk = PWMSelectTclk(pwm->htim);
 496              		.loc 1 41 15 view .LVU121
 497 0042 A060     		str	r0, [r4, #8]
  43:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
 498              		.loc 1 43 5 is_stmt 1 view .LVU122
 499 0044 6168     		ldr	r1, [r4, #4]
 500 0046 2068     		ldr	r0, [r4]
 501 0048 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 502              	.LVL37:
  44:bsp/pwm/bsp_pwm.c ****     PWMSetPeriod(pwm, pwm->period);
 503              		.loc 1 44 5 view .LVU123
 504 004c 94ED030A 		vldr.32	s0, [r4, #12]
 505 0050 2046     		mov	r0, r4
 506 0052 FFF7FEFF 		bl	PWMSetPeriod
 507              	.LVL38:
  45:bsp/pwm/bsp_pwm.c ****     PWMSetDutyRatio(pwm, pwm->dutyratio);
 508              		.loc 1 45 5 view .LVU124
 509 0056 94ED040A 		vldr.32	s0, [r4, #16]
 510 005a 2046     		mov	r0, r4
 511 005c FFF7FEFF 		bl	PWMSetDutyRatio
 512              	.LVL39:
  46:bsp/pwm/bsp_pwm.c ****     pwm_instance[idx++] = pwm;
 513              		.loc 1 46 5 view .LVU125
  46:bsp/pwm/bsp_pwm.c ****     pwm_instance[idx++] = pwm;
 514              		.loc 1 46 21 is_stmt 0 view .LVU126
 515 0060 044A     		ldr	r2, .L39
 516 0062 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 517 0064 591C     		adds	r1, r3, #1
 518 0066 1170     		strb	r1, [r2]
  46:bsp/pwm/bsp_pwm.c ****     pwm_instance[idx++] = pwm;
 519              		.loc 1 46 25 view .LVU127
 520 0068 034A     		ldr	r2, .L39+4
 521 006a 42F82340 		str	r4, [r2, r3, lsl #2]
  47:bsp/pwm/bsp_pwm.c ****     return pwm;
 522              		.loc 1 47 5 is_stmt 1 view .LVU128
  48:bsp/pwm/bsp_pwm.c **** }
 523              		.loc 1 48 1 is_stmt 0 view .LVU129
 524 006e 2046     		mov	r0, r4
 525 0070 38BD     		pop	{r3, r4, r5, pc}
 526              	.LVL40:
 527              	.L40:
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 14


  48:bsp/pwm/bsp_pwm.c **** }
 528              		.loc 1 48 1 view .LVU130
 529 0072 00BF     		.align	2
 530              	.L39:
 531 0074 00000000 		.word	.LANCHOR1
 532 0078 00000000 		.word	.LANCHOR0
 533              		.cfi_endproc
 534              	.LFE236:
 536              		.section	.text.PWMStartDMA,"ax",%progbits
 537              		.align	1
 538              		.global	PWMStartDMA
 539              		.syntax unified
 540              		.thumb
 541              		.thumb_func
 543              	PWMStartDMA:
 544              	.LVL41:
 545              	.LFB241:
  85:bsp/pwm/bsp_pwm.c **** {
 546              		.loc 1 85 1 is_stmt 1 view -0
 547              		.cfi_startproc
 548              		@ args = 0, pretend = 0, frame = 0
 549              		@ frame_needed = 0, uses_anonymous_args = 0
  85:bsp/pwm/bsp_pwm.c **** {
 550              		.loc 1 85 1 is_stmt 0 view .LVU132
 551 0000 08B5     		push	{r3, lr}
 552              	.LCFI5:
 553              		.cfi_def_cfa_offset 8
 554              		.cfi_offset 3, -8
 555              		.cfi_offset 14, -4
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
 556              		.loc 1 86 5 is_stmt 1 view .LVU133
 557 0002 93B2     		uxth	r3, r2
 558 0004 0A46     		mov	r2, r1
 559              	.LVL42:
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
 560              		.loc 1 86 5 is_stmt 0 view .LVU134
 561 0006 4168     		ldr	r1, [r0, #4]
 562              	.LVL43:
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
 563              		.loc 1 86 5 view .LVU135
 564 0008 0068     		ldr	r0, [r0]
 565              	.LVL44:
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
 566              		.loc 1 86 5 view .LVU136
 567 000a FFF7FEFF 		bl	HAL_TIM_PWM_Start_DMA
 568              	.LVL45:
  87:bsp/pwm/bsp_pwm.c **** }
 569              		.loc 1 87 1 view .LVU137
 570 000e 08BD     		pop	{r3, pc}
 571              		.cfi_endproc
 572              	.LFE241:
 574              		.section	.bss.idx,"aw",%nobits
 575              		.set	.LANCHOR1,. + 0
 578              	idx:
 579 0000 00       		.space	1
 580              		.section	.bss.pwm_instance,"aw",%nobits
 581              		.align	2
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 15


 582              		.set	.LANCHOR0,. + 0
 585              	pwm_instance:
 586 0000 00000000 		.space	64
 586      00000000 
 586      00000000 
 586      00000000 
 586      00000000 
 587              		.text
 588              	.Letext0:
 589              		.file 2 "c:\\installsoftware\\arm-gnu-toolchian\\arm-none-eabi\\include\\machine\\_default_types.h
 590              		.file 3 "c:\\installsoftware\\arm-gnu-toolchian\\arm-none-eabi\\include\\sys\\_stdint.h"
 591              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 592              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 593              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 594              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 595              		.file 8 "bsp/pwm/bsp_pwm.h"
 596              		.file 9 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 597              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc.h"
 598              		.file 11 "c:\\installsoftware\\arm-gnu-toolchian\\arm-none-eabi\\include\\stdlib.h"
ARM GAS  C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s 			page 16


DEFINED SYMBOLS
                            *ABS*:00000000 bsp_pwm.c
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:20     .text.PWMSelectTclk:00000000 $t
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:25     .text.PWMSelectTclk:00000000 PWMSelectTclk
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:123    .text.PWMSelectTclk:0000006c $d
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:129    .text.HAL_TIM_PWM_PulseFinishedCallback:00000000 $t
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:135    .text.HAL_TIM_PWM_PulseFinishedCallback:00000000 HAL_TIM_PWM_PulseFinishedCallback
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:213    .text.HAL_TIM_PWM_PulseFinishedCallback:0000003c $d
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:219    .text.PWMStart:00000000 $t
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:225    .text.PWMStart:00000000 PWMStart
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:251    .text.PWMStop:00000000 $t
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:257    .text.PWMStop:00000000 PWMStop
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:283    .text.PWMSetPeriod:00000000 $t
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:289    .text.PWMSetPeriod:00000000 PWMSetPeriod
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:330    .text.PWMSetDutyRatio:00000000 $t
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:336    .text.PWMSetDutyRatio:00000000 PWMSetDutyRatio
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:408    .text.PWMRegister:00000000 $t
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:414    .text.PWMRegister:00000000 PWMRegister
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:531    .text.PWMRegister:00000074 $d
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:537    .text.PWMStartDMA:00000000 $t
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:543    .text.PWMStartDMA:00000000 PWMStartDMA
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:578    .bss.idx:00000000 idx
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:579    .bss.idx:00000000 $d
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:581    .bss.pwm_instance:00000000 $d
C:\Users\z0147233\AppData\Local\Temp\cc6cTAdH.s:585    .bss.pwm_instance:00000000 pwm_instance

UNDEFINED SYMBOLS
HAL_RCC_GetPCLK1Freq
HAL_RCC_GetPCLK2Freq
APBPrescTable
HAL_TIM_PWM_Start
HAL_TIM_PWM_Stop
malloc
HAL_TIM_PWM_Start_DMA
